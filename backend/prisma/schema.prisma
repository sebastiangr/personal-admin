generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Admin User Model
model User {
  id            String   @id @default(uuid())
  username      String   @unique
  passwordHash  String
}

// Contact Model
model Contact {
  id             String         @id @default(uuid())
  companyName    String
  contactName    String?
  email          String?
  website        String?
  sector         String?
  notes          String?        @db.Text
  status         Status         @default(BACKLOG)
  interestLevel  Int            @default(1) // 1, 2, o 3
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt
  activityLogs   ActivityLog[] 
}

// Activity Model
model ActivityLog {
  id                String   @id @default(uuid())
  eventDescription  String
  createdAt         DateTime @default(now())
  contact           Contact  @relation(fields: [contactId], references: [id], onDelete: Cascade)
  contactId         String
}

// Status Enum
enum Status {
  BACKLOG
  TO_CONTACT
  CONTACTED
  WAITING_RESPONSE
  IN_CONVERSATION
  REJECTED
  HIRED // So√±emos en grande :)
}